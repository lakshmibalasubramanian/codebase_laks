<<<<<<< Updated upstream
<<<<<<< HEAD
#geom_text(aes(label = sprintf("P-Val = %s\n", kstest$p.value),x = 1, y = max(IntegratedIntensityCD13)), size = 3) +
ggplot2::ggsave("boxplot_Perimetrics.png",
path ="/Users/lakshmibalasubramanian/Documents/Lakshmi/CellProfiler_Perimetrics/Analysis_CP_Perimetrics", width = 8, height = 8, units = "in", dpi = 300)
kstest_24_48 <-
ks.test(
dat %>% filter(Timepoint == "24hpi") %>% select(IntegratedIntensityCD13) %>% as.matrix(),
dat %>% filter(Timepoint == "48hpi") %>% select(IntegratedIntensityCD13) %>% as.matrix(),
)
# Intialising the necessary library
=======
filenames <- list.files(dirnames[i], recursive = TRUE)
#print(filenames)
dat_inf <- list()
for (i in 1:length(file_timepoint)){
filenames_inf <-
c("statistics_inf_cell.csv")
for(i in 1:length(filenames_inf)){
dat_inf[[i]] <- readr::read_csv(sprintf("%s/%s", file_timepoint[i+1], filenames_inf[[i]]))
}
}
}
dat_inf
dat_inf[[2]]
dat_inf[[1]]
base_path <- "/Users/lakshmibalasubramanian/Documents/Lakshmi/SurfaceArea_analysis_new_Jun17"
dirnames <- list.dirs(base_path, recursive = FALSE)
for (i in 1:length(dirnames)){
file_timepoint <- list.dirs(dirnames[i], recursive = FALSE)
print(file_timepoint)
filenames <- list.files(dirnames[i], recursive = TRUE)
#print(filenames)
dat_inf <- list()
for (i in 1:length(file_timepoint)){
filenames_inf <-
c("statistics_inf_cell.csv")
for(i in 1:length(filenames_inf)){
dat_inf[[i]] <- readr::read_csv(sprintf("%s/%s", file_timepoint[i+1], filenames_inf[[i]]))
}
}
}
>>>>>>> origin/master
library(ggplot2)
library(dplyr)
library(magrittr)
base_path <- "/Users/lakshmibalasubramanian/Documents/Lakshmi/SurfaceArea_analysis_new_Jun17/48hpi_output"
#main_path <- "I:/Lakshmi/Surface_area_analysis_seg_editor/Dresden_images_results/Newfolder/New folder1"
filenames <- list.dirs(base_path)
filenames <- filenames[-1]
#i=2
for (i in 1:length(filenames)) {
path <- c(filenames[i])
nam <- list.files(base_path)
nam_col <- nam[i]
loca$File <- nam_col
print(nam_col)
for (i in 1:length(filenames)) {
path <- c(filenames[i])
nam <- list.files(base_path)
nam_col <- nam[i]
loca$File <- nam_col
print(nam_col)
}
base_path <- "/Users/lakshmibalasubramanian/Documents/Lakshmi/SurfaceArea_analysis_new_Jun17/48hpi_output"
filenames <- list.dirs(base_path)
filenames <- filenames[-1]
for (i in 1:length(filenames)) {
path <- c(filenames[i])
nam <- list.files(base_path)
nam_col <- nam[i]
loca$File <- nam_col
print(nam_col)
}
library(ggplot2)
library(dplyr)
library(magrittr)
library(ggplot2)
library(dplyr)
library(magrittr)
<<<<<<< HEAD
library(ggplot2)
library(dplyr)
library(magrittr)
base_path <- "/home/lab-admin/LAKSHMI/SurfaceArea_analysis_new_Jun17"
main_path <- "/home/lab-admin/LAKSHMI/SurfaceArea_analysis_new_Jun17"
filenames <- list.dirs(base_path)
library(ggplot2)
library(dplyr)
library(magrittr)
base_path <- "/home/lab-admin/LAKSHMI/SurfaceArea_analysis_new_Jun17"
main_path <- "/home/lab-admin/LAKSHMI/SurfaceArea_analysis_new_Jun17"
filenames <- list.dirs(base_path)
filenames <- filenames[-1]
for (i in 1:length(filenames)) {
path <- c(filenames[i])
nam <- list.files(base_path)
nam_col <- nam[i]
loca$File <- nam_col
print(nam_col)
#--------------Infected cell--------------------
filenames_inf <-
c("statistics_inf_cell.csv",
"statistics_inf_surfacearea_BC.csv")
dat_inf <- list()
for(i in 1:length(filenames_inf)){
dat_inf[[i]] <- readr::read_csv(sprintf("%s/%s", path, filenames_inf[[i]]))
}
names(dat_inf) <- filenames_inf
dat_cell_inf <- dat_inf[grep("cell", names(dat_inf))]
dat_saBC_inf <- dat_inf[grep("surfacearea_BC", names(dat_inf))]
dat_saBC_inf[is.na(dat_saBC_inf)] <- 0
loca_inf <-
cbind(
lapply(dat_cell_inf, function(x) x[[2]]) %>% as.matrix(),
lapply(dat_saBC_inf, function(x) x[[3]] %>% sum()/2) %>% as.matrix(),
lapply(dat_saBC_inf, function(x) x[[5]] %>% sum()/2) %>% as.matrix()
) %>% as.data.frame()
loca_inf <- plyr::colwise(as.numeric)(loca_inf)
loca_inf$Status <- "INF"
loca_inf$File <- nam_col
colnames(loca_inf) <- c("cell_Vol", "saBC_SA", "saBC_SV" , "Status","File Name")
#---------------PVM----------------------------
file.rename(from = file.path(path, "statistics_PVM.csv"), to = file.path(path, "statistics_PVM_cell.csv"))
filenames_pvm <-
c("statistics_PVM_cell.csv",
"statistics_PVM_surfacearea_BC.csv")
dat_pvm <- list()
for(i in 1:length(filenames_pvm)){
dat_pvm[[i]] <- readr::read_csv(sprintf("%s/%s", path, filenames_pvm[[i]]))
}
names(dat_pvm) <- filenames_pvm
dat_cell_pvm <- dat_pvm[grep("cell", names(dat_pvm))]
dat_saBC_pvm <- dat_pvm[grep("surfacearea_BC", names(dat_pvm))]
if (dat_saBC_pvm %>% as.data.frame() %>% nrow() == 0) {
dat_saBC_pvm[[1]][1,] <- 0
dat_saBC_pvm[[1]] <- plyr::colwise(as.numeric)(dat_saBC_pvm[[1]])
}
loca_pvm <-
cbind(
lapply(dat_cell_pvm, function(x) x[[2]]) %>% as.matrix(),
lapply(dat_saBC_pvm, function(x) x[[3]] %>% as.numeric() %>% sum()/2) %>% as.matrix(),
lapply(dat_saBC_pvm, function(x) x[[5]] %>% as.numeric() %>% sum()/2) %>% as.matrix()
) %>% as.data.frame()
loca_pvm <- plyr::colwise(as.numeric)(loca_pvm)
loca_pvm$Status <- "PVM"
loca_pvm$File <- nam_col
colnames(loca_pvm) <- c("cell_Vol", "saBC_SA", "saBC_SV", "Status","File Name")
#-----------------Uninfected hepatocytes (5 cells)--------------------
filenames_uninf <-
c("1statistics_uninf_cell.csv",
"1statistics_uninf_surfacearea_BC.csv",
"2statistics_uninf_cell.csv",
"2statistics_uninf_surfacearea_BC.csv",
"3statistics_uninf_cell.csv",
"3statistics_uninf_surfacearea_BC.csv",
"4statistics_uninf_cell.csv",
"4statistics_uninf_surfacearea_BC.csv",
"5statistics_uninf_cell.csv",
"5statistics_uninf_surfacearea_BC.csv")
dat <- list()
for(i in 1:length(filenames_uninf)) {
dat[[i]] <- readr::read_csv(sprintf("%s/%s", path, filenames_uninf[[i]]))
}
names(dat) <- filenames_uninf
dat_cell <- dat[grep("cell", names(dat))]
dat_saBC <- dat[grep("surfacearea_BC", names(dat))]
dat_saBC[is.na(dat_saBC)] <- 0
loca <-
cbind(
lapply(dat_cell, function(x) x[[2]]) %>% as.matrix(),
lapply(dat_saBC, function(x) x[[3]] %>% sum()/2) %>% as.matrix(),
lapply(dat_saBC, function(x) x[[5]] %>% sum()/2) %>% as.matrix()
) %>%
as.data.frame()
loca <- plyr::colwise(as.numeric)(loca)
plyr::colwise(mean)(loca)
loca$Status <- "UNINF"
loca$File <- nam_col
colnames(loca) <- c( "cell_Vol", "saBC_SA", "saBC_SV", "Status","File Name")
#dat_saBC$`1statistics_uninf_surfacearea_BC.csv`[[4]] %>% sum()
total <- rbind(loca_pvm,loca_inf,loca)
write.csv(total, file = file.path(path,"results.csv"))
colnames(total) <- c( "cell_Vol", "saBC_SA", "saBC_SV", "Status","File Name")
write.table(total, file = file.path(main_path, "master_results.csv"), append=TRUE, sep = ",", col.names = FALSE)
}
path <- c(filenames[i])
nam <- list.files(base_path)
nam_col <- nam[i]
loca$File <- nam_col
print(nam_col)
for (i in 1:length(filenames)){
path <- c(filenames[i])
nam <- list.files(base_path)
nam_col <- nam[i]
loca$File <- nam_col
print(nam_col)
}
base_path
for (i in 1:length(filenames)){
path <- c(filenames[i])
nam <- list.files(base_path)
nam_col <- nam[i]
#loca$File <- nam_col
print(nam_col)
}
filenames
base_path <- "/home/lab-admin/LAKSHMI/SurfaceArea_analysis_new_Jun17"
dirnames <- list.dirs(base_path)
dirnames
base_path <- "/home/lab-admin/LAKSHMI/SurfaceArea_analysis_new_Jun17"
dirnames <- list.dirs(base_path)
dirnames
base_path <- "/home/lab-admin/LAKSHMI/SurfaceArea_analysis_new_Jun17/"
dirnames <- list.dirs(base_path)
dirnames
base_path <- "/home/lab-admin/LAKSHMI/SurfaceArea_analysis_new_Jun17/"
dirnames <- list.dirs(base_path, recursive = FALSE)
dirnames
base_path <- "/home/lab-admin/LAKSHMI/SurfaceArea_analysis_new_Jun17"
dirnames <- list.dirs(base_path, recursive = FALSE)
dirnames
for (i in 1:length(dirnames))
{
#main_path <- "/home/lab-admin/LAKSHMI/SurfaceArea_analysis_new_Jun17"
filenames <- list.dirs(dirnames[i])
print(filenames)
}
{
#main_path <- "/home/lab-admin/LAKSHMI/SurfaceArea_analysis_new_Jun17"
filenames <- list.dirs(dirnames[i])
print(length(filenames))
}
for (i in 1:length(dirnames))
{
#main_path <- "/home/lab-admin/LAKSHMI/SurfaceArea_analysis_new_Jun17"
filenames[i] <- list.dirs(dirnames[i])
print(length(filenames[i]))
}
for (i in 1:length(dirnames))
{
#main_path <- "/home/lab-admin/LAKSHMI/SurfaceArea_analysis_new_Jun17"
filenames <- list.dirs(dirnames[i])
print(filenames[i])
}
for (i in 1:length(dirnames))
{
#main_path <- "/home/lab-admin/LAKSHMI/SurfaceArea_analysis_new_Jun17"
filenames <- list.dirs(dirnames[i])
print(i)
print(length(filenames[i]))
}
for (i in 1:length(dirnames))
{
#main_path <- "/home/lab-admin/LAKSHMI/SurfaceArea_analysis_new_Jun17"
filenames <- list.dirs(dirnames[i])
print(i)
#print(length(filenames[i]))
}
filenames <-list()
for (i in 1:length(dirnames))
{
#main_path <- "/home/lab-admin/LAKSHMI/SurfaceArea_analysis_new_Jun17"
filenames <- list.dirs(dirnames[i])
print(i)
print(filenames[i])
}
for (i in 1:length(dirnames))
{
#main_path <- "/home/lab-admin/LAKSHMI/SurfaceArea_analysis_new_Jun17"
filenames <- list.dirs(dirnames[i])
print(i)
print(filenames)
}
for (i in 1:length(dirnames))
{
#main_path <- "/home/lab-admin/LAKSHMI/SurfaceArea_analysis_new_Jun17"
filenames <- list.dirs(dirnames[i])
print(i)
print(filenames)
print(length(filenames))
}
for (i in 1:length(dirnames))
{
#main_path <- "/home/lab-admin/LAKSHMI/SurfaceArea_analysis_new_Jun17"
filenames <- list.dirs(dirnames[i])
print(i)
#print(filenames)
print(length(filenames))
}
for (i in 1:length(dirnames))
{
#main_path <- "/home/lab-admin/LAKSHMI/SurfaceArea_analysis_new_Jun17"
filenames <- list.dirs(dirnames[i])
print(i)
#print(filenames)
print(length(filenames))
for (i in 1:length(filenames))
{
path <- c(filenames[i])
nam <- list.files(base_path)
nam_col <- nam[i]
#loca$File <- nam_col
print(nam_col)
}
}
for (i in 1:length(dirnames))
{
#main_path <- "/home/lab-admin/LAKSHMI/SurfaceArea_analysis_new_Jun17"
filenames <- list.dirs(dirnames[i])
print(i)
#print(filenames)
print(length(filenames))
for (j in 1:length(filenames))
{
path <- c(filenames[j])
nam <- list.files(base_path)
nam_col <- nam[j]
#loca$File <- nam_col
print(nam_col)
}
}
filenames
dirnames
for (i in 1:length(dirnames)){
path <- c(filenames[i])
nam <- list.files(base_path)
nam_col <- nam[i]
#loca$File <- nam_col
print(nam_col)
}
path
nam <- list.files(path)
for (i in 1:length(dirnames)){
path <- c(filenames[i])
nam <- list.files(path)
nam_col <- nam[i]
#loca$File <- nam_col
print(nam_col)
}
nam
loca$File <- nam_col
for (i in 1:length(dirnames)){
path <- c(filenames[i])
nam <- list.files(path)
#nam_col <- nam[i]
print(nam)
}
for (i in 1:length(dirnames)){
path <- c(filenames[i])
print(path)
nam <- list.files(path)
#nam_col <- nam[i]
print(nam)
}
for (i in 1:length(dirnames)){
path <- c(filenames[i])
print(path)
nam <- list.files(path)
#nam_col <- nam[i]
#print(nam)
}
path <- list.dirs(dirnames[i])
print(path)
nam <- list.files(path)
for (i in 1:length(dirnames)){
path <- list.dirs(dirnames[i])
nam <- list.files(path)
#path_files <- c(filenames[i])
#print(path)
#nam <- list.files(path)
#nam_col <- nam[i]
#print(nam)
}
for (i in 1:length(dirnames)){
path <- list.dirs(dirnames[i])
nam <- list.files(path)
print(path)
print(nam)
#path_files <- c(filenames[i])
#nam <- list.files(path)
#nam_col <- nam[i]
#print(nam)
}
=======
base_path <- "/Users/lakshmibalasubramanian/Documents/Lakshmi/SurfaceArea_analysis_new_Jun17"
dirnames <- list.dirs(base_path, recursive = FALSE)
for (i in 1:length(dirnames)){
file_timepoint <- list.dirs(dirnames[i], recursive = FALSE)
print(file_timepoint)
filenames <- list.files(dirnames[i], recursive = TRUE)
#print(filenames)
dat_inf <- list()
for (i in 1:length(file_timepoint)){
filenames_inf <-
c("statistics_inf_cell.csv")
for(i in 1:length(filenames_inf)){
dat_inf[[i]] <- readr::read_csv(sprintf("%s/%s", file_timepoint[i+1], filenames_inf[[i]]))
}
}
}
file_timepoint
base_path <- "/Users/lakshmibalasubramanian/Documents/Lakshmi/SurfaceArea_analysis_new_Jun17"
dirnames <- list.dirs(base_path, recursive = FALSE)
for (i in 1:length(dirnames)){
file_timepoint <- list.dirs(dirnames[i], recursive = FALSE)
print(file_timepoint)
filenames <- list.files(dirnames[i], recursive = TRUE)
#print(filenames)
dat_inf <- list()
for (i in 1:length(file_timepoint)){
filenames_inf <-
c("statistics_inf_cell.csv")
for(i in 1:length(filenames_inf)){
dat_inf[[i]] <- readr::read_csv(sprintf("%s/%s", file_timepoint[i+1], filenames_inf[[i]]))
}
}
}
View(dat_inf)
length(file_timepoint)
file_timepoint[11]
file_timepoint[1]
file_timepoint[2]
base_path <- "/Users/lakshmibalasubramanian/Documents/Lakshmi/SurfaceArea_analysis_new_Jun17"
dirnames <- list.dirs(base_path, recursive = FALSE)
for (i in 1:length(dirnames)){
file_timepoint <- list.dirs(dirnames[i], recursive = FALSE)
print(file_timepoint)
filenames <- list.files(dirnames[i], recursive = TRUE)
#print(filenames)
dat_inf <- list()
for (i in 1:length(file_timepoint)){
filenames_inf <-
c("statistics_inf_cell.csv")
for(i in 1:length(filenames_inf)){
print(i)
dat_inf[[i]] <- readr::read_csv(sprintf("%s/%s", file_timepoint[i+1], filenames_inf[[i]]))
}
}
}
base_path <- "/Users/lakshmibalasubramanian/Documents/Lakshmi/SurfaceArea_analysis_new_Jun17"
dirnames <- list.dirs(base_path, recursive = FALSE)
for (i in 1:length(dirnames)){
file_timepoint <- list.dirs(dirnames[i], recursive = FALSE)
print(file_timepoint)
filenames <- list.files(dirnames[i], recursive = TRUE)
#print(filenames)
dat_inf <- list()
for (j in 1:length(file_timepoint)){
filenames_inf <-
c("statistics_inf_cell.csv")
for(i in 1:length(filenames_inf)){
dat_inf[[j]] <- readr::read_csv(sprintf("%s/%s", file_timepoint[j+1], filenames_inf[[i]]))
}
}
}
View(dat_inf)
base_path <- "/Users/lakshmibalasubramanian/Documents/Lakshmi/SurfaceArea_analysis_new_Jun17"
dirnames <- list.dirs(base_path, recursive = FALSE)
for (i in 1:length(dirnames)){
file_timepoint <- list.dirs(dirnames[i], recursive = FALSE)
=======
file_name_temp <- list.dirs(path,full.names = FALSE)
file_name_temp <- file_name_temp[-1]
file_timepoint <- file_timepoint[-1]
#print(path)
>>>>>>> Stashed changes
print(file_timepoint)
for (j in 1:length(file_timepoint)){
#-------------------infected---------------------------------------------------------------
filenames_inf <-
c("statistics_inf_cell.csv",
"statistics_inf_surfacearea_BC.csv")
dat_inf <- list()
for(i in 1:length(filenames_inf)){
dat_inf[[i]] <- readr::read_csv(sprintf("%s/%s", file_timepoint[j], filenames_inf[[i]]))
}
print(dat_inf[[i]])
names(dat_inf) <- filenames_inf
dat_cell_inf <- dat_inf[grep("cell", names(dat_inf))]
dat_saBC_inf <- dat_inf[grep("surfacearea_BC", names(dat_inf))]
dat_saBC_inf[is.na(dat_saBC_inf)] <- 0
loca_inf[[j]] <-
cbind(
lapply(dat_cell_inf, function(x) x[[2]]) %>% as.matrix(),
lapply(dat_saBC_inf, function(x) x[[3]] %>% as.numeric() %>% sum()/2) %>% as.matrix(),
lapply(dat_saBC_inf, function(x) x[[5]] %>% sum()/2) %>% as.matrix()
) %>% as.data.frame()
print(loca_inf[[j]])
#--------------------PVM------------------------------------------------------------------
file.rename(from = file.path(file_timepoint[j], "statistics_PVM.csv"), to = file.path(file_timepoint[j], "statistics_PVM_cell.csv"))
filenames_pvm <-
c("statistics_PVM_cell.csv",
"statistics_PVM_surfacearea_BC.csv")
dat_pvm <- list()
for(i in 1:length(filenames_pvm)){
dat_pvm[[i]] <- readr::read_csv(sprintf("%s/%s", file_timepoint[j], filenames_pvm[[i]]))
}
names(dat_pvm) <- filenames_pvm
dat_cell_pvm <- dat_pvm[grep("cell", names(dat_pvm))]
dat_saBC_pvm <- dat_pvm[grep("surfacearea_BC", names(dat_pvm))]
if (dat_saBC_pvm %>% as.data.frame() %>% nrow() == 0) {
dat_saBC_pvm[[1]][1,] <- 0
dat_saBC_pvm[[1]] <- plyr::colwise(as.numeric)(dat_saBC_pvm[[1]])
}
loca_pvm[[j]] <-
cbind(
lapply(dat_cell_pvm, function(x) x[[2]]) %>% as.matrix(),
lapply(dat_saBC_pvm, function(x) x[[3]] %>% as.numeric() %>% sum()/2) %>% as.matrix(),
lapply(dat_saBC_pvm, function(x) x[[5]] %>% as.numeric() %>% sum()/2) %>% as.matrix()
) %>% as.data.frame()
print(loca_pvm[[j]])
#--------------------uninfected cell------------------------------------------------------------------
filenames_uninf <-
c("1statistics_uninf_cell.csv","1statistics_uninf_surfacearea_BC.csv",
"2statistics_uninf_cell.csv","2statistics_uninf_surfacearea_BC.csv",
"3statistics_uninf_cell.csv","3statistics_uninf_surfacearea_BC.csv",
"4statistics_uninf_cell.csv","4statistics_uninf_surfacearea_BC.csv",
"5statistics_uninf_cell.csv","5statistics_uninf_surfacearea_BC.csv")
dat_uninf <- list()
for(i in 1:length(filenames_uninf)) {
dat_uninf[[i]] <- readr::read_csv(sprintf("%s/%s", file_timepoint[j], filenames_uninf[[i]]))
}
names(dat_uninf) <- filenames_uninf
dat_uninf_cell <- dat_uninf[grep("cell", names(dat_uninf))]
dat_uninf_saBC <- dat_uninf[grep("surfacearea_BC", names(dat_uninf))]
dat_uninf_saBC[is.na(dat_uninf_saBC)] <- 0
loca_uninf[[j]] <-
cbind(
lapply(dat_uninf_cell, function(x) x[[2]]) %>% as.matrix(),
lapply(dat_uninf_saBC, function(x) x[[3]] %>% sum()/2) %>% as.matrix(),
lapply(dat_uninf_saBC, function(x) x[[5]] %>% sum()/2) %>% as.matrix()
) %>%
as.data.frame()
print(loca_uninf[[j]])
}
tot_dat_inf <- list(list())
tot_dat_pvm <- list(list())
tot_dat_uninf <- list(list())
for (k in 1:length(file_timepoint)){
tot_dat_inf[[k]] <- rbind(loca_inf[[k]]) %>% as.data.frame()
tot_dat_inf[[k]] <- plyr::colwise(as.numeric)(loca_inf[[k]])
tot_dat_inf[[k]]$Status <- "INF"
tot_dat_inf[[k]]$File <- file_name_temp[k]
tot_dat_inf[[k]]$Timepoint <- substr(folder_list[m],start = 1, stop = 5)
colnames(tot_dat_inf[[k]]) <- c("cell_Vol", "saBC_SA", "saBC_SV" , "Status","File Name","Timepoint")
tot_dat_pvm[[k]] <- rbind(loca_inf[[k]]) %>% as.data.frame()
tot_dat_pvm[[k]] <- plyr::colwise(as.numeric)(loca_inf[[k]])
tot_dat_pvm[[k]]$Status <- "PVM"
tot_dat_pvm[[k]]$File <- file_name_temp[k]
tot_dat_pvm[[k]]$Timepoint <- substr(folder_list[m],start = 1, stop = 5)
colnames(tot_dat_pvm[[k]]) <- c("cell_Vol", "saBC_SA", "saBC_SV" , "Status","File Name","Timepoint")
tot_dat_uninf[[k]] <- rbind(loca_uninf[[k]]) %>% as.data.frame()
tot_dat_uninf[[k]] <- plyr::colwise(as.numeric)(loca_uninf[[k]])
tot_dat_uninf[[k]]$Status <- "UNINF"
tot_dat_uninf[[k]]$File <- file_name_temp[k]
tot_dat_uninf[[k]]$Timepoint <- substr(folder_list[m],start = 1, stop = 5)
colnames(tot_dat_uninf[[k]]) <- c("cell_Vol", "saBC_SA", "saBC_SV" , "Status","File Name","Timepoint")
}
infected[[m]] <- tot_dat_inf %>% bind_rows()
pvm[[m]] <- tot_dat_pvm %>% bind_rows()
uninfected[[m]] <- tot_dat_uninf %>% bind_rows()
}
total_inf <- infected %>% bind_rows()
total_pvm <- pvm %>% bind_rows()
total_uninf <- uninfected %>% bind_rows()
total_all <- rbind(total_inf,total_pvm,total_uninf)
View(total_all)
library(ggplot2)
library(dplyr)
library(magrittr)
base_path <- "/Users/lakshmibalasubramanian/Documents/Lakshmi/SurfaceArea_analysis_new_Jun17/"
folder_list <-
c(
"48hpi_output",
"24hpi_output"
)
loca_inf <- list(list())
infected <- list(list())
loca_pvm <- list(list())
pvm <- list(list())
loca_uninf <- list(list())
uninfected <- list(list())
for (m in 1:length(folder_list)){
path <- sprintf("%s%s", base_path, folder_list[m])
file_timepoint <- list.dirs(path)
file_name_temp <- list.dirs(path,full.names = FALSE)
file_name_temp <- file_name_temp[-1]
file_timepoint <- file_timepoint[-1]
#print(path)
print(file_timepoint)
for (j in 1:length(file_timepoint)){
#-------------------infected---------------------------------------------------------------
filenames_inf <-
c("statistics_inf_cell.csv",
"statistics_inf_surfacearea_BC.csv")
dat_inf <- list()
for(i in 1:length(filenames_inf)){
dat_inf[[i]] <- readr::read_csv(sprintf("%s/%s", file_timepoint[j], filenames_inf[[i]]))
}
print(dat_inf[[i]])
names(dat_inf) <- filenames_inf
dat_cell_inf <- dat_inf[grep("cell", names(dat_inf))]
dat_saBC_inf <- dat_inf[grep("surfacearea_BC", names(dat_inf))]
dat_saBC_inf[is.na(dat_saBC_inf)] <- 0
loca_inf[[j]] <-
cbind(
lapply(dat_cell_inf, function(x) x[[2]]) %>% as.matrix(),
lapply(dat_cell_SurVox_inf, function(x) x[[5]]) %>% as.matrix(),
lapply(dat_cell_SurPixel_inf, function(x) x[[3]]) %>% as.matrix(),
lapply(dat_saBC_inf, function(x) x[[3]] %>% as.numeric() %>% sum()/2) %>% as.matrix(),
lapply(dat_saBC_inf, function(x) x[[5]] %>% sum()/2) %>% as.matrix()
) %>% as.data.frame()
print(loca_inf[[j]])
#--------------------PVM------------------------------------------------------------------
file.rename(from = file.path(file_timepoint[j], "statistics_PVM.csv"), to = file.path(file_timepoint[j], "statistics_PVM_cell.csv"))
filenames_pvm <-
c("statistics_PVM_cell.csv",
"statistics_PVM_surfacearea_BC.csv")
dat_pvm <- list()
for(i in 1:length(filenames_pvm)){
dat_pvm[[i]] <- readr::read_csv(sprintf("%s/%s", file_timepoint[j], filenames_pvm[[i]]))
}
names(dat_pvm) <- filenames_pvm
dat_cell_pvm <- dat_pvm[grep("cell", names(dat_pvm))]
dat_saBC_pvm <- dat_pvm[grep("surfacearea_BC", names(dat_pvm))]
if (dat_saBC_pvm %>% as.data.frame() %>% nrow() == 0) {
dat_saBC_pvm[[1]][1,] <- 0
dat_saBC_pvm[[1]] <- plyr::colwise(as.numeric)(dat_saBC_pvm[[1]])
}
loca_pvm[[j]] <-
cbind(
lapply(dat_cell_pvm, function(x) x[[2]]) %>% as.matrix(),
lapply(dat_cell_SurVox_pvm, function(x) x[[5]]) %>% as.matrix(),
lapply(dat_cell_SurPixel_pvm, function(x) x[[3]]) %>% as.matrix(),
lapply(dat_saBC_pvm, function(x) x[[3]] %>% as.numeric() %>% sum()/2) %>% as.matrix(),
lapply(dat_saBC_pvm, function(x) x[[5]] %>% as.numeric() %>% sum()/2) %>% as.matrix()
) %>% as.data.frame()
print(loca_pvm[[j]])
#--------------------uninfected cell------------------------------------------------------------------
filenames_uninf <-
c("1statistics_uninf_cell.csv","1statistics_uninf_surfacearea_BC.csv",
"2statistics_uninf_cell.csv","2statistics_uninf_surfacearea_BC.csv",
"3statistics_uninf_cell.csv","3statistics_uninf_surfacearea_BC.csv",
"4statistics_uninf_cell.csv","4statistics_uninf_surfacearea_BC.csv",
"5statistics_uninf_cell.csv","5statistics_uninf_surfacearea_BC.csv")
dat_uninf <- list()
for(i in 1:length(filenames_uninf)) {
dat_uninf[[i]] <- readr::read_csv(sprintf("%s/%s", file_timepoint[j], filenames_uninf[[i]]))
}
names(dat_uninf) <- filenames_uninf
dat_uninf_cell <- dat_uninf[grep("cell", names(dat_uninf))]
dat_uninf_saBC <- dat_uninf[grep("surfacearea_BC", names(dat_uninf))]
dat_uninf_saBC[is.na(dat_uninf_saBC)] <- 0
loca_uninf[[j]] <-
cbind(
lapply(dat_uninf_cell, function(x) x[[2]]) %>% as.matrix(),
lapply(dat_cell_SurVox_uninf, function(x) x[[5]]) %>% as.matrix(),
lapply(dat_cell_SurPixel_uninf, function(x) x[[3]]) %>% as.matrix(),
lapply(dat_uninf_saBC, function(x) x[[3]] %>% sum()/2) %>% as.matrix(),
lapply(dat_uninf_saBC, function(x) x[[5]] %>% sum()/2) %>% as.matrix()
) %>%
as.data.frame()
print(loca_uninf[[j]])
}
tot_dat_inf <- list(list())
tot_dat_pvm <- list(list())
tot_dat_uninf <- list(list())
for (k in 1:length(file_timepoint)){
tot_dat_inf[[k]] <- rbind(loca_inf[[k]]) %>% as.data.frame()
tot_dat_inf[[k]] <- plyr::colwise(as.numeric)(loca_inf[[k]])
tot_dat_inf[[k]]$Status <- "INF"
tot_dat_inf[[k]]$File <- file_name_temp[k]
tot_dat_inf[[k]]$Timepoint <- substr(folder_list[m],start = 1, stop = 5)
colnames(tot_dat_inf[[k]]) <- c("cell_Vol", "Surf_Voxels","Surf_Pixel", "saBC_SA", "saBC_SV" , "Status","File Name","Timepoint")
tot_dat_pvm[[k]] <- rbind(loca_inf[[k]]) %>% as.data.frame()
tot_dat_pvm[[k]] <- plyr::colwise(as.numeric)(loca_inf[[k]])
tot_dat_pvm[[k]]$Status <- "PVM"
tot_dat_pvm[[k]]$File <- file_name_temp[k]
tot_dat_pvm[[k]]$Timepoint <- substr(folder_list[m],start = 1, stop = 5)
colnames(tot_dat_pvm[[k]]) <- c("cell_Vol", "Surf_Voxels","Surf_Pixel", "saBC_SA", "saBC_SV" , "Status","File Name","Timepoint")
tot_dat_uninf[[k]] <- rbind(loca_uninf[[k]]) %>% as.data.frame()
tot_dat_uninf[[k]] <- plyr::colwise(as.numeric)(loca_uninf[[k]])
tot_dat_uninf[[k]]$Status <- "UNINF"
tot_dat_uninf[[k]]$File <- file_name_temp[k]
tot_dat_uninf[[k]]$Timepoint <- substr(folder_list[m],start = 1, stop = 5)
colnames(tot_dat_uninf[[k]]) <- c("cell_Vol", "Surf_Voxels","Surf_Pixel", "saBC_SA", "saBC_SV" , "Status","File Name","Timepoint")
}
infected[[m]] <- tot_dat_inf %>% bind_rows()
pvm[[m]] <- tot_dat_pvm %>% bind_rows()
uninfected[[m]] <- tot_dat_uninf %>% bind_rows()
}
base_path <- "/Users/lakshmibalasubramanian/Documents/Lakshmi/SurfaceArea_analysis_new_Jun17/"
folder_list <-
c(
"48hpi_output",
"24hpi_output"
)
loca_inf <- list(list())
infected <- list(list())
loca_pvm <- list(list())
pvm <- list(list())
loca_uninf <- list(list())
uninfected <- list(list())
for (m in 1:length(folder_list)){
path <- sprintf("%s%s", base_path, folder_list[m])
file_timepoint <- list.dirs(path)
file_name_temp <- list.dirs(path,full.names = FALSE)
file_name_temp <- file_name_temp[-1]
file_timepoint <- file_timepoint[-1]
#print(path)
print(file_timepoint)
for (j in 1:length(file_timepoint)){
#-------------------infected---------------------------------------------------------------
filenames_inf <-
c("statistics_inf_cell.csv",
"statistics_inf_surfacearea_BC.csv")
dat_inf <- list()
for(i in 1:length(filenames_inf)){
dat_inf[[i]] <- readr::read_csv(sprintf("%s/%s", file_timepoint[j], filenames_inf[[i]]))
}
print(dat_inf[[i]])
names(dat_inf) <- filenames_inf
dat_cell_inf <- dat_inf[grep("cell", names(dat_inf))]
dat_cell_SurVox_inf <- dat_inf[grep("cell", names(dat_inf))]
dat_cell_SurPixel_inf <- dat_inf[grep("cell", names(dat_inf))]
dat_saBC_inf <- dat_inf[grep("surfacearea_BC", names(dat_inf))]
dat_saBC_inf[is.na(dat_saBC_inf)] <- 0
loca_inf[[j]] <-
cbind(
lapply(dat_cell_inf, function(x) x[[2]]) %>% as.matrix(),
lapply(dat_cell_SurVox_inf, function(x) x[[5]]) %>% as.matrix(),
lapply(dat_cell_SurPixel_inf, function(x) x[[3]]) %>% as.matrix(),
lapply(dat_saBC_inf, function(x) x[[3]] %>% as.numeric() %>% sum()/2) %>% as.matrix(),
lapply(dat_saBC_inf, function(x) x[[5]] %>% sum()/2) %>% as.matrix()
) %>% as.data.frame()
print(loca_inf[[j]])
#--------------------PVM------------------------------------------------------------------
file.rename(from = file.path(file_timepoint[j], "statistics_PVM.csv"), to = file.path(file_timepoint[j], "statistics_PVM_cell.csv"))
filenames_pvm <-
c("statistics_PVM_cell.csv",
"statistics_PVM_surfacearea_BC.csv")
dat_pvm <- list()
for(i in 1:length(filenames_pvm)){
dat_pvm[[i]] <- readr::read_csv(sprintf("%s/%s", file_timepoint[j], filenames_pvm[[i]]))
}
names(dat_pvm) <- filenames_pvm
dat_cell_pvm <- dat_pvm[grep("cell", names(dat_pvm))]
dat_cell_SurVox_pvm <- dat_pvm[grep("cell", names(dat_pvm))]
dat_cell_SurPixel_pvm <- dat_pvm[grep("cell", names(dat_pvm))]
dat_saBC_pvm <- dat_pvm[grep("surfacearea_BC", names(dat_pvm))]
if (dat_saBC_pvm %>% as.data.frame() %>% nrow() == 0) {
dat_saBC_pvm[[1]][1,] <- 0
dat_saBC_pvm[[1]] <- plyr::colwise(as.numeric)(dat_saBC_pvm[[1]])
}
loca_pvm[[j]] <-
cbind(
lapply(dat_cell_pvm, function(x) x[[2]]) %>% as.matrix(),
lapply(dat_cell_SurVox_pvm, function(x) x[[5]]) %>% as.matrix(),
lapply(dat_cell_SurPixel_pvm, function(x) x[[3]]) %>% as.matrix(),
lapply(dat_saBC_pvm, function(x) x[[3]] %>% as.numeric() %>% sum()/2) %>% as.matrix(),
lapply(dat_saBC_pvm, function(x) x[[5]] %>% as.numeric() %>% sum()/2) %>% as.matrix()
) %>% as.data.frame()
print(loca_pvm[[j]])
#--------------------uninfected cell------------------------------------------------------------------
filenames_uninf <-
c("1statistics_uninf_cell.csv","1statistics_uninf_surfacearea_BC.csv",
"2statistics_uninf_cell.csv","2statistics_uninf_surfacearea_BC.csv",
"3statistics_uninf_cell.csv","3statistics_uninf_surfacearea_BC.csv",
"4statistics_uninf_cell.csv","4statistics_uninf_surfacearea_BC.csv",
"5statistics_uninf_cell.csv","5statistics_uninf_surfacearea_BC.csv")
dat_uninf <- list()
for(i in 1:length(filenames_uninf)) {
dat_uninf[[i]] <- readr::read_csv(sprintf("%s/%s", file_timepoint[j], filenames_uninf[[i]]))
}
names(dat_uninf) <- filenames_uninf
dat_uninf_cell <- dat_uninf[grep("cell", names(dat_uninf))]
dat_cell_SurVox_uninf <- dat_uninf[grep("cell", names(dat_uninf))]
dat_cell_SurPixel_uninf <- dat_uninf[grep("cell", names(dat_uninf))]
dat_uninf_saBC <- dat_uninf[grep("surfacearea_BC", names(dat_uninf))]
dat_uninf_saBC[is.na(dat_uninf_saBC)] <- 0
loca_uninf[[j]] <-
cbind(
lapply(dat_uninf_cell, function(x) x[[2]]) %>% as.matrix(),
lapply(dat_cell_SurVox_uninf, function(x) x[[5]]) %>% as.matrix(),
lapply(dat_cell_SurPixel_uninf, function(x) x[[3]]) %>% as.matrix(),
lapply(dat_uninf_saBC, function(x) x[[3]] %>% sum()/2) %>% as.matrix(),
lapply(dat_uninf_saBC, function(x) x[[5]] %>% sum()/2) %>% as.matrix()
) %>%
as.data.frame()
print(loca_uninf[[j]])
}
tot_dat_inf <- list(list())
tot_dat_pvm <- list(list())
tot_dat_uninf <- list(list())
for (k in 1:length(file_timepoint)){
tot_dat_inf[[k]] <- rbind(loca_inf[[k]]) %>% as.data.frame()
tot_dat_inf[[k]] <- plyr::colwise(as.numeric)(loca_inf[[k]])
tot_dat_inf[[k]]$Status <- "INF"
tot_dat_inf[[k]]$File <- file_name_temp[k]
tot_dat_inf[[k]]$Timepoint <- substr(folder_list[m],start = 1, stop = 5)
colnames(tot_dat_inf[[k]]) <- c("cell_Vol", "Surf_Voxels","Surf_Pixel", "saBC_SA", "saBC_SV" , "Status","File Name","Timepoint")
tot_dat_pvm[[k]] <- rbind(loca_inf[[k]]) %>% as.data.frame()
tot_dat_pvm[[k]] <- plyr::colwise(as.numeric)(loca_inf[[k]])
tot_dat_pvm[[k]]$Status <- "PVM"
tot_dat_pvm[[k]]$File <- file_name_temp[k]
tot_dat_pvm[[k]]$Timepoint <- substr(folder_list[m],start = 1, stop = 5)
colnames(tot_dat_pvm[[k]]) <- c("cell_Vol", "Surf_Voxels","Surf_Pixel", "saBC_SA", "saBC_SV" , "Status","File Name","Timepoint")
tot_dat_uninf[[k]] <- rbind(loca_uninf[[k]]) %>% as.data.frame()
tot_dat_uninf[[k]] <- plyr::colwise(as.numeric)(loca_uninf[[k]])
tot_dat_uninf[[k]]$Status <- "UNINF"
tot_dat_uninf[[k]]$File <- file_name_temp[k]
tot_dat_uninf[[k]]$Timepoint <- substr(folder_list[m],start = 1, stop = 5)
colnames(tot_dat_uninf[[k]]) <- c("cell_Vol", "Surf_Voxels","Surf_Pixel", "saBC_SA", "saBC_SV" , "Status","File Name","Timepoint")
}
infected[[m]] <- tot_dat_inf %>% bind_rows()
pvm[[m]] <- tot_dat_pvm %>% bind_rows()
uninfected[[m]] <- tot_dat_uninf %>% bind_rows()
}
total_inf <- infected %>% bind_rows()
total_pvm <- pvm %>% bind_rows()
total_uninf <- uninfected %>% bind_rows()
total_all <- rbind(total_inf,total_pvm,total_uninf)
View(total_all)
# This script is to extract the data from the volume and SA program that is being done with all the images using the macro "Modified_SA_vol_PVM_cellSep17.ijm". This script extracts information from two timepoints (48 & 24 hpi). This script has been modified slightly to take from 33hpi output bcz we have calculated only the volume related calculation in 33hpi infection. The output generated are  XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
library(ggplot2)
library(dplyr)
library(magrittr)
#Declaring the basic path
base_path <- "/Users/lakshmibalasubramanian/Documents/Lakshmi/SurfaceArea_analysis_new_Jun17/"
#Generating the folder list
folder_list <-
c(
"48hpi_output",
"24hpi_output"
)
#Creating empty dataframes
loca_inf <- list(list())
infected <- list(list())
loca_pvm <- list(list())
pvm <- list(list())
loca_uninf <- list(list())
uninfected <- list(list())
for (m in 1:length(folder_list)){   # This is the main loop which has two timepoints folder
path <- sprintf("%s%s", base_path, folder_list[m])
file_timepoint <- list.dirs(path)
# This command list only the folder names from the entire path. This is used just to get the image analysis results folder names
file_name_temp <- list.dirs(path,full.names = FALSE)
file_name_temp <- file_name_temp[-1]  # This is just to renumber the array number
file_timepoint <- file_timepoint[-1]
#print(path)
#print(file_timepoint)
for (j in 1:length(file_timepoint)){
#-------------------infected---------------------------------------------------------------
filenames_inf <-
c("statistics_inf_cell.csv",
"statistics_inf_surfacearea_BC.csv")
dat_inf <- list()
for(i in 1:length(filenames_inf)){
<<<<<<< Updated upstream
dat_inf[[i]] <- readr::read_csv(sprintf("%s/%s", path_temp, filenames_inf[[i]]))
}
}
}
View(dat_inf)
>>>>>>> origin/master
=======
dat_inf[[i]] <- readr::read_csv(sprintf("%s/%s", file_timepoint[j], filenames_inf[[i]]))
}
print(dat_inf[[i]])
names(dat_inf) <- filenames_inf
dat_cell_inf <- dat_inf[grep("cell", names(dat_inf))]
dat_cell_SurVox_inf <- dat_inf[grep("cell", names(dat_inf))]
dat_cell_SurPixel_inf <- dat_inf[grep("cell", names(dat_inf))]
dat_saBC_inf <- dat_inf[grep("surfacearea_BC", names(dat_inf))]
dat_saBC_inf[is.na(dat_saBC_inf)] <- 0
loca_inf[[j]] <-
cbind(
lapply(dat_cell_inf, function(x) x[[2]]) %>% as.matrix(),
lapply(dat_cell_SurVox_inf, function(x) x[[5]]) %>% as.matrix(),
lapply(dat_cell_SurPixel_inf, function(x) x[[3]]) %>% as.matrix(),
lapply(dat_saBC_inf, function(x) x[[3]] %>% as.numeric() %>% sum()/2) %>% as.matrix(),
lapply(dat_saBC_inf, function(x) x[[5]] %>% sum()/2) %>% as.matrix()
) %>% as.data.frame()
print(loca_inf[[j]])
#--------------------PVM------------------------------------------------------------------
# This line is to rename the statistics file for pvm since its named differently. The temperory renaming is done to maintain the same pattern in the entire code
file.rename(from = file.path(file_timepoint[j], "statistics_PVM.csv"), to = file.path(file_timepoint[j], "statistics_PVM_cell.csv"))
filenames_pvm <-
c("statistics_PVM_cell.csv",
"statistics_PVM_surfacearea_BC.csv")
dat_pvm <- list()
for(i in 1:length(filenames_pvm)){
dat_pvm[[i]] <- readr::read_csv(sprintf("%s/%s", file_timepoint[j], filenames_pvm[[i]]))
}
names(dat_pvm) <- filenames_pvm
dat_cell_pvm <- dat_pvm[grep("cell", names(dat_pvm))]
dat_cell_SurVox_pvm <- dat_pvm[grep("cell", names(dat_pvm))]
dat_cell_SurPixel_pvm <- dat_pvm[grep("cell", names(dat_pvm))]
dat_saBC_pvm <- dat_pvm[grep("surfacearea_BC", names(dat_pvm))]
if (dat_saBC_pvm %>% as.data.frame() %>% nrow() == 0) {
dat_saBC_pvm[[1]][1,] <- 0
dat_saBC_pvm[[1]] <- plyr::colwise(as.numeric)(dat_saBC_pvm[[1]])
}
loca_pvm[[j]] <-
cbind(
lapply(dat_cell_pvm, function(x) x[[2]]) %>% as.matrix(),
lapply(dat_cell_SurVox_pvm, function(x) x[[5]]) %>% as.matrix(),
lapply(dat_cell_SurPixel_pvm, function(x) x[[3]]) %>% as.matrix(),
lapply(dat_saBC_pvm, function(x) x[[3]] %>% as.numeric() %>% sum()/2) %>% as.matrix(),
lapply(dat_saBC_pvm, function(x) x[[5]] %>% as.numeric() %>% sum()/2) %>% as.matrix()
) %>% as.data.frame()
print(loca_pvm[[j]])
#--------------------uninfected cell------------------------------------------------------------------
filenames_uninf <-
c("1statistics_uninf_cell.csv","1statistics_uninf_surfacearea_BC.csv",
"2statistics_uninf_cell.csv","2statistics_uninf_surfacearea_BC.csv",
"3statistics_uninf_cell.csv","3statistics_uninf_surfacearea_BC.csv",
"4statistics_uninf_cell.csv","4statistics_uninf_surfacearea_BC.csv",
"5statistics_uninf_cell.csv","5statistics_uninf_surfacearea_BC.csv")
dat_uninf <- list()
for(i in 1:length(filenames_uninf)) {
dat_uninf[[i]] <- readr::read_csv(sprintf("%s/%s", file_timepoint[j], filenames_uninf[[i]]))
}
names(dat_uninf) <- filenames_uninf
dat_uninf_cell <- dat_uninf[grep("cell", names(dat_uninf))]
dat_cell_SurVox_uninf <- dat_uninf[grep("cell", names(dat_uninf))]
dat_cell_SurPixel_uninf <- dat_uninf[grep("cell", names(dat_uninf))]
dat_uninf_saBC <- dat_uninf[grep("surfacearea_BC", names(dat_uninf))]
dat_uninf_saBC[is.na(dat_uninf_saBC)] <- 0
loca_uninf[[j]] <-
cbind(
lapply(dat_uninf_cell, function(x) x[[2]]) %>% as.matrix(),
lapply(dat_cell_SurVox_uninf, function(x) x[[5]]) %>% as.matrix(),
lapply(dat_cell_SurPixel_uninf, function(x) x[[3]]) %>% as.matrix(),
lapply(dat_uninf_saBC, function(x) x[[3]] %>% sum()/2) %>% as.matrix(),
lapply(dat_uninf_saBC, function(x) x[[5]] %>% sum()/2) %>% as.matrix()
) %>%
as.data.frame()
print(loca_uninf[[j]])
}
#Declaring empty dataframes outside the loops
tot_dat_inf <- list(list())
tot_dat_pvm <- list(list())
tot_dat_uninf <- list(list())
for (k in 1:length(file_timepoint)){
tot_dat_inf[[k]] <- rbind(loca_inf[[k]]) %>% as.data.frame()
tot_dat_inf[[k]] <- plyr::colwise(as.numeric)(loca_inf[[k]])
tot_dat_inf[[k]]$Status <- "INF" # These are the additional columns that we are adding in the dataframes
tot_dat_inf[[k]]$File <- file_name_temp[k]
#This substr command to take only few characters from the variable (only "48hpi" from "48hpi_output")
tot_dat_inf[[k]]$Timepoint <- substr(folder_list[m],start = 1, stop = 5)
colnames(tot_dat_inf[[k]]) <- c("cell_Vol", "Surf_Voxels","Surf_Pixel", "saBC_SA", "saBC_SV" , "Status","File Name","Timepoint")
tot_dat_pvm[[k]] <- rbind(loca_inf[[k]]) %>% as.data.frame()
tot_dat_pvm[[k]] <- plyr::colwise(as.numeric)(loca_inf[[k]])
tot_dat_pvm[[k]]$Status <- "PVM" # These are the additional columns that we are adding in the dataframes
tot_dat_pvm[[k]]$File <- file_name_temp[k]
#This substr command to take only few characters from the variable (only "48hpi" from "48hpi_output")
tot_dat_pvm[[k]]$Timepoint <- substr(folder_list[m],start = 1, stop = 5)
colnames(tot_dat_pvm[[k]]) <- c("cell_Vol", "Surf_Voxels","Surf_Pixel", "saBC_SA", "saBC_SV" , "Status","File Name","Timepoint")
tot_dat_uninf[[k]] <- rbind(loca_uninf[[k]]) %>% as.data.frame()
tot_dat_uninf[[k]] <- plyr::colwise(as.numeric)(loca_uninf[[k]])
tot_dat_uninf[[k]]$Status <- "UNINF" # These are the additional columns that we are adding in the dataframes
tot_dat_uninf[[k]]$File <- file_name_temp[k]
#This substr command to take only few characters from the variable (only "48hpi" from "48hpi_output")
tot_dat_uninf[[k]]$Timepoint <- substr(folder_list[m],start = 1, stop = 5)
colnames(tot_dat_uninf[[k]]) <- c("cell_Vol", "Surf_Voxels","Surf_Pixel", "saBC_SA", "saBC_SV" , "Status","File Name","Timepoint")
}
infected[[m]] <- tot_dat_inf %>% bind_rows()
pvm[[m]] <- tot_dat_pvm %>% bind_rows()
uninfected[[m]] <- tot_dat_uninf %>% bind_rows()
}
#These are the dataframes for each infected, pvm & uninfected data separately
total_inf <- infected %>% bind_rows()
total_pvm <- pvm %>% bind_rows()
total_uninf <- uninfected %>% bind_rows()
#Combining all the dataframes
total_all <- rbind(total_inf,total_pvm,total_uninf)
write.csv(total_inf, file = "/Users/lakshmibalasubramanian/Documents/Lakshmi/SurfaceArea_analysis_new_Jun17/infected_data.csv")
write.csv(total_pvm, file = "/Users/lakshmibalasubramanian/Documents/Lakshmi/SurfaceArea_analysis_new_Jun17/pvm_data.csv")
write.csv(total_uninf, file = "/Users/lakshmibalasubramanian/Documents/Lakshmi/SurfaceArea_analysis_new_Jun17/uninfected_data.csv")
write.csv(total_all, file = "/Users/lakshmibalasubramanian/Documents/Lakshmi/SurfaceArea_analysis_new_Jun17/master_data.csv")
View(total_all)
>>>>>>> Stashed changes
